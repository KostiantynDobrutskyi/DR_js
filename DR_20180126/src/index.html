<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <title>Document</title>

    <style>

        body {
            padding-top: 20px;
        }

    </style>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-xs-8 col-xs-push-2">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">

                    <h2 class="panel-title">Form registration</h2>
                </div>

                <div class="panel-body">
                    <form action="#" class="form-horizontal" name="loginForm">
                        <ul class="list-group">


                            <li class="list-group-item">

                                <div class="form-group has-feedback" id="groupEmail">
                                    <label class="col-sm-3 control-label" for="inputEmail">
                                        Email</label>
                                    <div class="col-sm-5">
                                        <input type="Email" class="form-control" id="inputEmail" name="inputEmail">
                                        <span class="glyphicon  form-control-feedback" id="iconEmail"></span>
                                    </div>

                                    <label class="col-sm-4 control-label ss" id="messageEmail" hidden>
                                        Success</label>
                                </div>

                            </li>

                            <li class="list-group-item">


                                <div class="form-group has-feedback" id="groupPassword">
                                    <label class="col-sm-3 control-label" for="inputPassword">
                                        Password</label>
                                    <div class="col-sm-5">
                                        <input type="password" class="form-control" id="inputPassword" name="inputPassword">
                                        <span class="glyphicon  form-control-feedback" id="iconPassword"></span>
                                    </div>

                                    <label class="col-sm-4 control-label ss" id="messagePassword" hidden>
                                        Error</label>
                                </div>

                            </li>

                            <li class="list-group-item">
                                <div class="form-group has-feedback" id="groupConfirmPswd">
                                    <label class="col-sm-3 control-label" for="inputConfirmPswd">
                                        Confirm password</label>
                                    <div class="col-sm-5">
                                        <input type="password" class="form-control" id="inputConfirmPswd"
                                               name="inputConfirmPswd">
                                        <span class="glyphicon form-control-feedback" id="iconConfirmPswd"></span>
                                    </div>

                                    <label class="col-sm-4 control-label ss" id="messageConfirmPswd" hidden>
                                        Error Error Error Error Error Error Error Error</label>
                                </div>

                            </li>

                            <li class="list-group-item">
                                <div class="form-group has-feedback" id="groupGender">
                                    <label class="col-sm-3 control-label">
                                        Gender</label>
                                    <div class="col-sm-5">
                                        <label class="radio-inline"><input type="radio" name="inputGender">Male</label>
                                        <label class="radio-inline"><input type="radio" name="inputGender">Female</label>
                                    </div>

                                    <label class="col-sm-4 control-label ss" id="messageGender" hidden>
                                        Error Error Error Error Error Error Error Error</label>
                                </div>
                            </li>

                            <li class="list-group-item">
                                <div class="form-group  has-feedback" id="groupProfession">
                                    <label class="col-sm-3 control-label" for="inputProfession">
                                        Profession</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" id="inputProfession"
                                               name="inputProfession">
                                        <span class="glyphicon form-control-feedback" id="iconProfession"></span>
                                    </div>

                                    <label class="col-sm-4 control-label ss" id="messageProfession" hidden>
                                         Error</label>
                                </div>

                            </li>
                        </ul>

                        <div class="row">
                            <div class="col-md-2 col-md-offset-10">
                                <button id="submit" class="btn btn-primary">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>


            </div>

            <!-- List group -->

        </div>
    </div>
</div>
</div>

<script>
    var
        labelPas = document.querySelectorAll(".ss"),
        MIM_LEN_EMAIL = 6,
        MIN_LEN_PSWD = 8,
        MIN_LEN_PROF = 2,
        REGEX_EMAIL = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
        REGEX_PROF = /^[a-zA-Z]+$/i,
        classError = "has-error",
        classSuccess = "has-success",
        gliphiconOk = "glyphicon-ok",
        gliphiconRemove = "glyphicon-remove";

    var
        form = document.forms.loginForm,
        inputEmailEl = form.inputEmail,
        inputPasswordEl = form.inputPassword,
        inputConfirmPswdEl = form.inputConfirmPswd,
        inputGenderEl = form.inputGender,
        inputProfessionEl = form.inputProfession;

    var
        groupEmailEL = document.querySelector("#groupEmail"),
        groupPasswordEL = document.querySelector("#groupPassword"),
        groupConfirmPswdEL = document.querySelector("#groupConfirmPswd"),
        groupGenderEL = document.querySelector("#groupGender"),
        groupProfessionEL = document.querySelector("#groupProfession");

    var
        iconEmailEL = document.querySelector("#iconEmail"),
        iconPasswordEL = document.querySelector("#iconPassword"),
        iconConfirmPswdEl = document.querySelector("#iconConfirmPswd"),
        iconProfessionEl = document.querySelector("#iconProfession");

    var
        messageEmailEl = document.querySelector("#messageEmail"),
        messagePasswordEl = document.querySelector("#messagePassword"),
        messageConfirmPswdEl = document.querySelector("#messageConfirmPswd"),
        messageGenderEl = document.querySelector("#messageGender"),
        messageProfessionEL = document.querySelector("#messageProfession");


    for (var i = 0; i < labelPas.length; i++) {
        labelPas[i].style.textAlign = "justify"
    }

    form.addEventListener("submit", function (e) {
        e.preventDefault();

        if (isValid(emailValidation,messageEmailEl,groupEmailEL,iconEmailEL)){
            return;
        }

         if (isValid(passwordValidation,messagePasswordEl,groupPasswordEL,iconPasswordEL)){
            return;
        }

         if (isValid(confirmValidation,messageConfirmPswdEl,groupConfirmPswdEL,iconConfirmPswdEl)){
            return;
        }

         if (isValidGender(genderValidation,messageGenderEl,groupGenderEL)){
            return;
        }

         if (isValid(professionValidation,messageProfessionEL,groupProfessionEL,iconProfessionEl)){
            return;
        }
    });

    inputEmailEl.addEventListener("keyup", isValid.bind(null,
        emailValidation,messageEmailEl,groupEmailEL,iconEmailEL));

    inputPasswordEl.addEventListener("keyup", isValid.bind(null,
        passwordValidation,messagePasswordEl,groupPasswordEL,iconPasswordEL));

    inputConfirmPswdEl.addEventListener("keyup", isValid.bind(null,
        confirmValidation,messageConfirmPswdEl,groupConfirmPswdEL,iconConfirmPswdEl));

    inputProfessionEl.addEventListener("keyup", isValid.bind(null,
        professionValidation,messageProfessionEL,groupProfessionEL,iconProfessionEl));



    function isValid(func,messageEl, group, icon) {
        var message = func();


        if(message){
            messageEl.textContent = message;
            messageEl.hidden = !message;
            group.classList.add(classError);
            icon.classList.add(gliphiconRemove);

            return;
        }

        else {
            messageEl.textContent = "Confirmed";
            messageEl.hidden = false;
            group.classList.remove(classError);
            group.classList.add(classSuccess);
            icon.classList.remove(gliphiconRemove);
            icon.classList.add(gliphiconOk);
            return;
        }
    }


    function isValidGender(func,messageEl, group) {
        var message = func();


        if(message){
            messageEl.textContent = message;
            messageEl.hidden = !message;
            group.classList.add(classError);
            return;
        }

        else {
            messageEl.textContent = "Confirmed";
            messageEl.hidden = false;
            group.classList.remove(classError);
            group.classList.add(classSuccess);
            return;
        }
    }

    function emailValidation() {
        var login = inputEmailEl.value.trim();

        if (login.length < MIM_LEN_EMAIL) {

            return messageEmailEl.textContent = "Min length of email is " + MIM_LEN_EMAIL;
        }

        else if (!REGEX_EMAIL.test(login)) {
            return messageEmailEl.textContent = "Email is not valid";
        }

        else {
            return false;
        }

    }


    function passwordValidation() {
        var password = inputPasswordEl.value.trim();

        if(password.length < MIN_LEN_PSWD){
            return messagePasswordEl.textContent = "Password should be greater than "+MIN_LEN_PSWD;
        }

        else {
            return false;
        }
    }

    function confirmValidation() {
        var password = passwordValidation();
        if(password){
            return password;
        }
        else if (inputPasswordEl.value!==inputConfirmPswdEl.value)
        {
            return "Confirm does not match password";
        }

        else{
            return false;
        }

    }

    function genderValidation() {
        var gender = inputGenderEl.value;
        if(gender===""){
            return messageGenderEl.textContent = "not selected gender";
        }

        else {
            return false;
        }
    }


    function professionValidation() {
        var profession = inputProfessionEl.value.trim();

        if(profession.length < MIN_LEN_PROF){
            return messageProfessionEL.textContent = "Profession should be greater than "+MIN_LEN_PROF;
        }

        else if(!REGEX_PROF.test(profession)){
            return messageProfessionEL.textContent = "incorrect entry";
        }

        else {
            return false;
        }
    }

</script>
</body>
</html>